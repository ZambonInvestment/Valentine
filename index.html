<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>San Valentino ğŸ’–</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(#ffd6e7, #fff0f5);
  text-align: center;
  overflow-x: hidden;
}

/* CUORI */
.heart {
  position: fixed;
  color: red;
  animation: float 6s linear infinite;
}

@keyframes float {
  from { transform: translateY(100vh); opacity: 1; }
  to { transform: translateY(-10vh); opacity: 0; }
}

/* SEZIONI */
.section {
  display: none;
  padding: 20px;
  min-height: 100vh;
}

.active {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* TESTO */
h1 { font-size: 28px; }
h2 { font-size: 22px; }

/* BOTTONI MOBILE */
button {
  width: 80%;
  max-width: 300px;
  padding: 16px;
  font-size: 20px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  margin: 12px;
}

/* CAPTCHA GRID MOBILE */
.grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  width: 90%;
  max-width: 400px;
  margin: 20px auto;
}

img {
  width: 100%;
  aspect-ratio: 1;
  object-fit: cover;
  border-radius: 12px;
  border: 4px solid transparent;
  cursor: pointer;
}

.selected {
  border: 4px solid red;
}

/* DESKTOP UPGRADE */
@media (min-width: 768px) {
  .grid {
    grid-template-columns: repeat(3, 1fr);
  }

  h1 { font-size: 36px; }
}

/* MESSAGGIO SEGRETO */
#secret {
  font-size: 20px;
  color: #c4005a;
  margin-top: 20px;
  display: none;
  padding: 10px;
}
</style>
</head>

<body>

<!-- GIOCO -->
<div id="game" class="section active">
  <h1>ğŸ’– Be my valentine? ğŸ’–</h1>

  <button id="yesBtn"
    onclick="startCaptcha()"
    style="background:#ff4d88;color:white;">
    YES ğŸ’˜
  </button>

  <button id="noBtn"
    onmouseover="escapeNo()"
    ontouchstart="escapeNo()"
    style="background:#ddd;">
    No ğŸ˜¢
  </button>
</div>

<!-- CAPTCHA -->
<div id="captcha" class="section">
  <h2>Seleziona tutte le foto del tuo ragazzo ğŸ˜‰</h2>

  <div class="grid">
    <img src="me1.jpg" onclick="toggle(this,true)">
    <img src="random1.jpg" onclick="toggle(this,false)">
    <img src="me2.jpg" onclick="toggle(this,true)">
    <img src="random2.jpg" onclick="toggle(this,false)">
    <img src="me3.jpg" onclick="toggle(this,true)">
    <img src="random3.jpg" onclick="toggle(this,false)">
  </div>

  <button onclick="checkCaptcha()">Verifica ğŸ’Œ</button>

  <div id="secret">
    ğŸ’– Congratulazioni amore! ğŸ’–<br><br>
    ğŸ <b>[SCRIVI QUI IL REGALO]</b> ğŸ<br><br>
    Buon San Valentino! Ti amo ğŸ’˜
  </div>
</div>

<script>
/* CUORI ANIMATI */
function createHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerHTML = "ğŸ’–";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = (Math.random() * 18 + 12) + "px";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 6000);
}
setInterval(createHeart, 400);

/* NO CHE SCAPPA (TOUCH FRIENDLY) */
function escapeNo() {
  const btn = document.getElementById("noBtn");
  btn.innerText = "YES ğŸ’˜";
  btn.style.position = "absolute";
  btn.style.left = Math.random() * 70 + "%";
  btn.style.top = Math.random() * 70 + "%";

  document.getElementById("yesBtn").style.fontSize = "24px";
}

/* PASSA AL CAPTCHA */
function startCaptcha() {
  document.getElementById("game").classList.remove("active");
  document.getElementById("captcha").classList.add("active");
}

/* CAPTCHA */
let correct = new Set();
let selected = new Set();

function toggle(img, isCorrect) {
  img.classList.toggle("selected");
  const id = img.src;

  if (selected.has(id)) selected.delete(id);
  else selected.add(id);

  if (isCorrect) correct.add(id);
}

function checkCaptcha() {
  let success = true;

  correct.forEach(id => {
    if (!selected.has(id)) success = false;
  });

  if (success && selected.size === correct.size) {
    document.getElementById("secret").style.display = "block";
  } else {
    alert("Ops! Riprova amore ğŸ˜˜");
  }
}
</script>

</body>
</html>