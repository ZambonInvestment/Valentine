<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>San Valentino ğŸ’–</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(#ffd6e7, #fff0f5);
  text-align: center;
  overflow-x: hidden;
}

/* CUORI ANIMATI */
.heart {
  position: fixed;
  color: red;
  font-size: 20px;
  animation: float 6s linear infinite;
}

@keyframes float {
  from { transform: translateY(100vh); opacity: 1; }
  to { transform: translateY(-10vh); opacity: 0; }
}

/* SEZIONI */
.section {
  display: none;
  padding: 40px;
}

.active {
  display: block;
}

/* BOTTONI */
button {
  padding: 12px 24px;
  font-size: 18px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  margin: 10px;
}

/* CAPTCHA */
.grid {
  display: grid;
  grid-template-columns: repeat(3, 150px);
  gap: 10px;
  justify-content: center;
}

img {
  width: 150px;
  height: 150px;
  cursor: pointer;
  border: 4px solid transparent;
  border-radius: 10px;
}

.selected {
  border: 4px solid red;
}

#secret {
  font-size: 22px;
  color: #c4005a;
  margin-top: 20px;
  display: none;
}
</style>
</head>

<body>

<!-- SEZIONE 1: GIOCO -->
<div id="game" class="section active">
  <h1>ğŸ’– Be my valentine? ğŸ’–</h1>

  <button id="yesBtn" onclick="startCaptcha()" style="background:#ff4d88;color:white;">
    YES ğŸ’˜
  </button>

  <button id="noBtn" onmouseover="escapeNo()" style="background:#ddd;">
    No ğŸ˜¢
  </button>
</div>

<!-- SEZIONE 2: CAPTCHA -->
<div id="captcha" class="section">
  <h2>Seleziona tutte le foto del tuo ragazzo ğŸ˜‰</h2>

  <div class="grid">
    <img src="me1.jpg" onclick="toggle(this,true)">
    <img src="random1.jpg" onclick="toggle(this,false)">
    <img src="me2.jpg" onclick="toggle(this,true)">
    <img src="random2.jpg" onclick="toggle(this,false)">
    <img src="me3.jpg" onclick="toggle(this,true)">
    <img src="random3.jpg" onclick="toggle(this,false)">
  </div>

  <button onclick="checkCaptcha()">Verifica ğŸ’Œ</button>

  <div id="secret">
    ğŸ’– Congratulazioni amore! ğŸ’–<br><br>
    Il tuo regalo segreto Ã¨:<br>
    ğŸ <b>[SCRIVI QUI IL REGALO]</b> ğŸ<br><br>
    Buon San Valentino! Ti amo ğŸ’˜
  </div>
</div>

<script>
/* CUORI */
function createHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerHTML = "ğŸ’–";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = (Math.random() * 20 + 10) + "px";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 6000);
}
setInterval(createHeart, 300);

/* GIOCO NO CHE SCAPPA */
function escapeNo() {
  const btn = document.getElementById("noBtn");
  btn.innerText = "YES ğŸ’˜";
  btn.style.position = "absolute";
  btn.style.left = Math.random() * 80 + "%";
  btn.style.top = Math.random() * 80 + "%";
  document.getElementById("yesBtn").style.fontSize = "26px";
}

/* PASSA AL CAPTCHA */
function startCaptcha() {
  document.getElementById("game").classList.remove("active");
  document.getElementById("captcha").classList.add("active");
}

/* CAPTCHA */
let correct = new Set();
let selected = new Set();

function toggle(img, isCorrect) {
  img.classList.toggle("selected");
  const id = img.src;

  if (selected.has(id)) selected.delete(id);
  else selected.add(id);

  if (isCorrect) correct.add(id);
}

function checkCaptcha() {
  let success = true;

  correct.forEach(id => {
    if (!selected.has(id)) success = false;
  });

  if (success && selected.size === correct.size) {
    document.getElementById("secret").style.display = "block";
  } else {
    alert("Ops! Riprova amore ğŸ˜˜");
  }
}
</script>

</body>
</html>